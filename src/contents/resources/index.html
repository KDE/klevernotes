<!DOCTYPE html>
<html lang="">
    <!-- SPDX-License-Identifier: BSD-3-Clause -->
    <!-- SPDX-FileCopyrightText: 2023 Louis Schul <schul9louis@gmail.com> -->
    <head>
        <meta charset="utf-8">
        <script src="qrc:/qwebchannel.js"></script>
    </head>
    <body>
        <style id="css"></style>

        <div id="contentElem"></div>

        <script>
            function copyCode(button) {
                const codeBlock = button.nextElementSibling

                console.log("copy:" + codeBlock.innerText)
            }
        </script>
        <script>
            'use strict';

            const contentElem = document.getElementById('contentElem');
            const cssElem = document.getElementById('css');

            const updateCss = function(css) {
                cssElem.innerHTML = css
            }

            const updateText = function(text) {
                contentElem.innerHTML = text
            }

            new QWebChannel(qt.webChannelTransport,
                function(channel) {
                    const contentLink = channel.objects.contentLink;
                    updateText(contentLink.text);
                    contentLink.textChanged.connect(updateText);

                    const cssLink = channel.objects.cssLink;
                    updateCss(cssLink.text);
                    cssLink.textChanged.connect(updateCss);
                }
            );
        </script>
    </body>
</html>
